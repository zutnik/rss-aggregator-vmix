<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSS –ê–≥—Ä–µ–≥–∞—Ç–æ—Ä –¥–ª—è VMix</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Geologica:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="background-pattern"></div>
    
    <div class="container">
        <header class="header">
            <div class="logo">
                <div class="logo-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="5" cy="19" r="2"/>
                        <path d="M4 4a16 16 0 0 1 16 16"/>
                        <path d="M4 11a9 9 0 0 1 9 9"/>
                    </svg>
                </div>
                <h1>RSS –ê–≥—Ä–µ–≥–∞—Ç–æ—Ä</h1>
            </div>
            <p class="subtitle">–õ–æ–∫–∞–ª—å–Ω–∏–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è VMix —Ç–∞ —ñ–Ω—à–∏—Ö –ø—Ä–æ–≥—Ä–∞–º</p>
        </header>

        <section class="add-feed-section">
            <h2>–î–æ–¥–∞—Ç–∏ –Ω–æ–≤—É —Å—Ç—Ä—ñ—á–∫—É</h2>
            <form id="addFeedForm" class="add-feed-form">
                <div class="input-group">
                    <input 
                        type="url" 
                        id="feedUrl" 
                        placeholder="https://example.com/feed/" 
                        required
                    >
                    <input 
                        type="text" 
                        id="feedName" 
                        placeholder="–ù–∞–∑–≤–∞ (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)"
                    >
                    <input 
                        type="number" 
                        id="feedMaxItems" 
                        placeholder="–ú–∞–∫—Å. –Ω–æ–≤–∏–Ω"
                        min="1"
                        max="100"
                        value="30"
                        class="input-small"
                    >
                </div>
                <button type="submit" class="btn btn-primary">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"/>
                        <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    –î–æ–¥–∞—Ç–∏
                </button>
            </form>
        </section>

        <section class="rss-endpoints">
            <h2>üîó RSS-–µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏ –¥–ª—è VMix</h2>
            <div class="endpoints-grid">
                <div class="endpoint-card">
                    <span class="endpoint-label">–í—Å—ñ —Å—Ç—Ä—ñ—á–∫–∏:</span>
                    <code id="allFeedsUrl">http://localhost:5050/rss/all</code>
                    <button class="btn-copy" onclick="copyToClipboard('allFeedsUrl')">üìã</button>
                </div>
            </div>
        </section>

        <section class="feeds-section">
            <div class="section-header">
                <h2>–ü—ñ–¥–∫–ª—é—á–µ–Ω—ñ —Å—Ç—Ä—ñ—á–∫–∏</h2>
                <button id="refreshBtn" class="btn btn-secondary" onclick="refreshFeeds()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 2v6h-6"/>
                        <path d="M3 12a9 9 0 0 1 15-6.7L21 8"/>
                        <path d="M3 22v-6h6"/>
                        <path d="M21 12a9 9 0 0 1-15 6.7L3 16"/>
                    </svg>
                    –û–Ω–æ–≤–∏—Ç–∏ –≤—Å—ñ
                </button>
            </div>

            <div id="feedsList" class="feeds-list">
                {% for feed in feeds %}
                <div class="feed-card" data-feed-id="{{ feed.id }}">
                    <div class="feed-info">
                        <h3 class="feed-title">{{ feed.name }}</h3>
                        <p class="feed-url">{{ feed.url }}</p>
                        <div class="feed-meta">
                            <span class="item-count">üì∞ {{ feed.item_count }}/{{ feed.max_items or 30 }} –Ω–æ–≤–∏–Ω</span>
                            {% if feed.last_updated %}
                            <span class="last-updated">üïí {{ feed.last_updated }}</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="feed-actions">
                        <button class="btn btn-icon" onclick="viewFeed({{ feed.id }})" title="–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                <circle cx="12" cy="12" r="3"/>
                            </svg>
                        </button>
                        <button class="btn btn-icon" onclick="editFeed({{ feed.id }}, '{{ feed.name }}', {{ feed.max_items or 30 }})" title="–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="3"/>
                                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                            </svg>
                        </button>
                        <button class="btn btn-icon" onclick="copyFeedUrl({{ feed.id }})" title="–ö–æ–ø—ñ—é–≤–∞—Ç–∏ RSS URL">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                            </svg>
                        </button>
                        <button class="btn btn-icon btn-danger" onclick="deleteFeed({{ feed.id }})" title="–í–∏–¥–∞–ª–∏—Ç–∏">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3,6 5,6 21,6"/>
                                <path d="M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2V6"/>
                            </svg>
                        </button>
                    </div>
                </div>
                {% else %}
                <div class="empty-state">
                    <div class="empty-icon">üì°</div>
                    <p>–©–µ –Ω–µ–º–∞—î –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏—Ö —Å—Ç—Ä—ñ—á–æ–∫</p>
                    <p class="hint">–î–æ–¥–∞–π—Ç–µ –≤–∞—à—É –ø–µ—Ä—à—É RSS-—Å—Ç—Ä—ñ—á–∫—É –≤–∏—â–µ</p>
                </div>
                {% endfor %}
            </div>
        </section>
    </div>

    <!-- Modal for viewing feed items -->
    <div id="feedModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">–ù–æ–≤–∏–Ω–∏</h2>
                <button class="btn-close" onclick="closeModal()">&times;</button>
            </div>
            <div id="modalBody" class="modal-body">
                <!-- Items will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Modal for editing feed settings -->
    <div id="editModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å—Ç—Ä—ñ—á–∫–∏</h2>
                <button class="btn-close" onclick="closeEditModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editFeedForm" class="edit-form">
                    <input type="hidden" id="editFeedId">
                    <div class="form-group">
                        <label for="editFeedName">–ù–∞–∑–≤–∞</label>
                        <input type="text" id="editFeedName" required>
                    </div>
                    <div class="form-group">
                        <label for="editMaxItems">–ú–∞–∫—Å–∏–º—É–º –Ω–æ–≤–∏–Ω</label>
                        <input type="number" id="editMaxItems" min="1" max="100" required>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeEditModal()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                        <button type="submit" class="btn btn-primary">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Toast notifications -->
    <div id="toast" class="toast"></div>

    <script src="/static/app.js"></script>
</body>
</html>
